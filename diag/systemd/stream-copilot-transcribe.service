[Unit]
Description=Stream Co-Pilot HLS Transcription Worker
After=network.target nginx.service

[Service]
Type=simple
WorkingDirectory=/root/stream-copilot
Environment=STREAM_COPILOT_HLS_DIR=/var/www/html/hls
Environment=STREAM_COPILOT_HLS_M3U8=preview.m3u8
Environment=STREAM_COPILOT_TRANSCRIPT_JSON=/root/stream-copilot/data/transcript.json
Environment=STREAM_COPILOT_WHISPER_MODEL=base
Environment=STREAM_COPILOT_WHISPER_LANG=en
Environment=STREAM_COPILOT_TRANSCRIBE_POLL=1.0
ExecStart=/root/stream-copilot/venv/bin/python3 -u collector/transcribe_hls.py
Restart=always
RestartSec=2

[Install]
WantedBy=multi-user.target
